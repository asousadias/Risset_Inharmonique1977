<CsoundSynthesizer>
<CsInstruments>
; ===================================================================
; RISSET'S INHARMONIQUE (1977)
; Adapted from
; Lorrain, Denis (1980)
;    "Analyse de la bande magnetique de l'oeuvre de Jean-Claude Risset - Inharmonique"
;    in Rapports IRCAM 26/80.
; different version of SV1 values for PLF6 provided by Jean-Claude Risset
; 		Developed by:
; 		Antonio de Sousa Dias (a.sousadias@belasartes.ulisboa.pt)
; 		JosÃ© Luis Ferreira
; 		2011-19
; ===================================================================

sr      = 48000
ksmps   = 8
nchnls  = 2
 

giamp_fact	= 16	; Amplitude factor (not in the original orchestra)

; S 3 - global variables:
giamp_factLB1113 = 8;
gaB3206    init 0
gaB3207    init 0


; ==============================
; S 3 - LB1113.ORC:
; ==============================
instr     3205, 3206, 3207, 3208, 3215, 3216, 3217, 3218,  3225, 3226, 3227, 3228,  3235, 3236, 3237, 3238
; This version consolidates instruments for a better efficiency
; the main differences are:
    ; i(320)5 & 6 use F2 for envelope // i(320)7 & 8 use F3 for envelope
    ; i(320)5 & 7 use left output // i(320)6 & 8 use rigth output
    
    ;NOTE due to realtime generation and impossibility of changing ftables in use, 
    ; instruments are instatiated according to section
ichannel = ( (p1 % 10 == 5) || (p1 % 10 == 7) ? 1 : 2 )


ifn1 = 3201
ifn1 = ( (p1 > 3210) ? 3211 : ifn1 )
ifn1 = ( (p1 > 3220) ? 3212 : ifn1 )
ifn1 = ( (p1 > 3230) ? 3213 : ifn1 )

ifn2 = 3202
ifn3 = 3203
ifnX = ( (p1 % 10 == 5) || (p1 % 10 == 6) ? ifn2 : ifn3 ) 

iG80	=	 p6

iDUR	=	1/p3

iP5	=	p4 * iG80 * giamp_factLB1113     ; SEC1-2 = 6.25, SEC3 = 1
iP6	=	p5

aB3	oscili	iP5,     iDUR,     ifnX
aB3	oscili	aB3,     iP6,     ifn1
	outch ichannel, aB3
endin


</CsInstruments>
<CsScore>

; ==============================
;  S 3 - LB1113.SCO fn:
; ==============================
f3201     0     4096     10     1     0.1     0.01
f3202     0     512     5     0.001     100     1     412     0.001
f3203     0     512     5     0.001     2     1     510     0.001
; wavetables to replace 3 variants of f3301
f3211     0	4096	10	1	0.1     0.01
f3212     0	4096	10	1		0.5		0		0.2
f3213     0	4096	10	1	

; ==============================
;  S 3 - LB1113.SCO not:
; ==============================
/* original
f3201     0     4096     10     1     0.1     0.01

plf	7	0	2	7	-1	0.1	-1	0		
i	3205	8	4.5	700	880	6.25 ;	p6=G80				
i	3208	8	3.5	500	659					
											
plf	7	0	2	10	-0.7	0.15	-1	0		
i	3206	8	4	500	554					
i	3207	8	4	500	466					
											
plf	7	0	2	12	-0.6	0.1	-1	0		
i	3205	8	4	300	246					
i	3206	8	4.5	300	349					

f0	17											
s									
f3201     0     4096     10     1     0.5	0     0.2										
plf	7	0	2	7	-1	0.1	1	0		
i	3205	8	4.5	700	880	6.25 ;	p6=G80					
i	3208	8	3.5	400	523					
											
plf	7	0	2	10	-0.7	0.15	-1	0		
i	3206	8.012	5	300	277					
i	3206	8.01	5	300	392					
											
plf	7	0	2	12	-0.6	0.2	-1	0		
i	3206	8.027	7	200	233					
i	3205	8.029	6	200	370					
											
f0	17											
s

f3201     0     4096     10     1			
											
plf	7	0	2	5	-2	0.2	-1	0.7		
i	3205	12	6	700	440	1 ;	p6=G80					
i	3206	12.2	6	500	293.5					
											
plf	7	0	2	8	-1.3	0.1	-1	0.7		
i	3206	12.5	5	500	207.5					
i	3205	12.6	5	500	174.5					
											
plf	7	0	2	10	-1	0.1	-1	0.7		
i	3205	13.1	5	700	130.5					
i	3206	13	5	1000	92.5

f0 18				
*/
; development by subroutine PLF7	
;SECTION 1
;p1	p2	p3	p4	p5	p6
;	st	dur	amp	frq	G80
i 3215 8 4.500 87.500 880 6.250
i 3215 7 4.400 87.500 1760 6.250
i 3215 6 4.300 87.500 2640 6.250
i 3215 5 4.200 87.500 3520 6.250
i 3215 4 4.100 87.500 4400 6.250
i 3215 3 4.000 87.500 5280 6.250
i 3215 2 3.900 87.500 6160 6.250
i 3215 1 3.800 87.500 7040 6.250
i 3218 8 3.500 62.500 659 6.250
i 3218 7 3.400 62.500 1318 6.250
i 3218 6 3.300 62.500 1977 6.250
i 3218 5 3.200 62.500 2636 6.250
i 3218 4 3.100 62.500 3295 6.250
i 3218 3 3.000 62.500 3954 6.250
i 3218 2 2.900 62.500 4613 6.250
i 3218 1 2.800 62.500 5272 6.250
i 3216 8 4 45.455 554 6.250
i 3216 7.300 3.850 45.455 1108 6.250
i 3216 6.600 3.700 45.455 1662 6.250
i 3216 5.900 3.550 45.455 2216 6.250
i 3216 5.200 3.400 45.455 2770 6.250
i 3216 4.500 3.250 45.455 3324 6.250
i 3216 3.800 3.100 45.455 3878 6.250
i 3216 3.100 2.950 45.455 4432 6.250
i 3216 2.400 2.800 45.455 4986 6.250
i 3216 1.700 2.650 45.455 5540 6.250
i 3216 1.000 2.500 45.455 6094 6.250
i 3217 8 3 45.455 466 6.250
i 3217 7.300 2.850 45.455 932 6.250
i 3217 6.600 2.700 45.455 1398 6.250
i 3217 5.900 2.550 45.455 1864 6.250
i 3217 5.200 2.400 45.455 2330 6.250
i 3217 4.500 2.250 45.455 2796 6.250
i 3217 3.800 2.100 45.455 3262 6.250
i 3217 3.100 1.950 45.455 3728 6.250
i 3217 2.400 1.800 45.455 4194 6.250
i 3217 1.700 1.650 45.455 4660 6.250
i 3217 1.000 1.500 45.455 5126 6.250
i 3215 8 4 23.077 246 6.250
i 3215 7.400 3.900 23.077 492 6.250
i 3215 6.800 3.800 23.077 738 6.250
i 3215 6.200 3.700 23.077 984 6.250
i 3215 5.600 3.600 23.077 1230 6.250
i 3215 5.000 3.500 23.077 1476 6.250
i 3215 4.400 3.400 23.077 1722 6.250
i 3215 3.800 3.300 23.077 1968 6.250
i 3215 3.200 3.200 23.077 2214 6.250
i 3215 2.600 3.100 23.077 2460 6.250
i 3215 2.000 3.000 23.077 2706 6.250
i 3215 1.400 2.900 23.077 2952 6.250
i 3215 0.800 2.800 23.077 3198 6.250
i 3216 8 4.500 23.077 349 6.250
i 3216 7.400 4.400 23.077 698 6.250
i 3216 6.800 4.300 23.077 1047 6.250
i 3216 6.200 4.200 23.077 1396 6.250
i 3216 5.600 4.100 23.077 1745 6.250
i 3216 5.000 4.000 23.077 2094 6.250
i 3216 4.400 3.900 23.077 2443 6.250
i 3216 3.800 3.800 23.077 2792 6.250
i 3216 3.200 3.700 23.077 3141 6.250
i 3216 2.600 3.600 23.077 3490 6.250
i 3216 2.000 3.500 23.077 3839 6.250
i 3216 1.400 3.400 23.077 4188 6.250
i 3216 0.800 3.300 23.077 4537 6.250
f0	17	;	TER	17	
s

;SECTION 2		

f3201	0	4096	10	1	0.5	0	0.2
i 3225 8 4.500 87.500 880 6.250
i 3225 7 4.400 87.500 1760 6.250
i 3225 6 4.300 87.500 2640 6.250
i 3225 5 4.200 87.500 3520 6.250
i 3225 4 4.100 87.500 4400 6.250
i 3225 3 4.000 87.500 5280 6.250
i 3225 2 3.900 87.500 6160 6.250
i 3225 1 3.800 87.500 7040 6.250
i 3228 8 3.500 50 523 6.250
i 3228 7 3.400 50 1046 6.250
i 3228 6 3.300 50 1569 6.250
i 3228 5 3.200 50 2092 6.250
i 3228 4 3.100 50 2615 6.250
i 3228 3 3.000 50 3138 6.250
i 3228 2 2.900 50 3661 6.250
i 3228 1 2.800 50 4184 6.250
i 3226 8.012 5 27.273 277 6.250
i 3226 7.312 4.850 27.273 554 6.250
i 3226 6.612 4.700 27.273 831 6.250
i 3226 5.912 4.550 27.273 1108 6.250
i 3226 5.212 4.400 27.273 1385 6.250
i 3226 4.512 4.250 27.273 1662 6.250
i 3226 3.812 4.100 27.273 1939 6.250
i 3226 3.112 3.950 27.273 2216 6.250
i 3226 2.412 3.800 27.273 2493 6.250
i 3226 1.712 3.650 27.273 2770 6.250
i 3226 1.012 3.500 27.273 3047 6.250
i 3226 8.010 5 27.273 392 6.250
i 3226 7.310 4.850 27.273 784 6.250
i 3226 6.610 4.700 27.273 1176 6.250
i 3226 5.910 4.550 27.273 1568 6.250
i 3226 5.210 4.400 27.273 1960 6.250
i 3226 4.510 4.250 27.273 2352 6.250
i 3226 3.810 4.100 27.273 2744 6.250
i 3226 3.110 3.950 27.273 3136 6.250
i 3226 2.410 3.800 27.273 3528 6.250
i 3226 1.710 3.650 27.273 3920 6.250
i 3226 1.010 3.500 27.273 4312 6.250
i 3226 8.027 7 15.385 233 6.250
i 3226 7.427 6.800 15.385 466 6.250
i 3226 6.827 6.600 15.385 699 6.250
i 3226 6.227 6.400 15.385 932 6.250
i 3226 5.627 6.200 15.385 1165 6.250
i 3226 5.027 6.000 15.385 1398 6.250
i 3226 4.427 5.800 15.385 1631 6.250
i 3226 3.827 5.600 15.385 1864 6.250
i 3226 3.227 5.400 15.385 2097 6.250
i 3226 2.627 5.200 15.385 2330 6.250
i 3226 2.027 5.000 15.385 2563 6.250
i 3226 1.427 4.800 15.385 2796 6.250
i 3226 0.827 4.600 15.385 3029 6.250
i 3225 8.029 6 15.385 370 6.250
i 3225 7.429 5.800 15.385 740 6.250
i 3225 6.829 5.600 15.385 1110 6.250
i 3225 6.229 5.400 15.385 1480 6.250
i 3225 5.629 5.200 15.385 1850 6.250
i 3225 5.029 5.000 15.385 2220 6.250
i 3225 4.429 4.800 15.385 2590 6.250
i 3225 3.829 4.600 15.385 2960 6.250
i 3225 3.229 4.400 15.385 3330 6.250
i 3225 2.629 4.200 15.385 3700 6.250
i 3225 2.029 4.000 15.385 4070 6.250
i 3225 1.429 3.800 15.385 4440 6.250
i 3225 0.829 3.600 15.385 4810 6.250
f0	17	;	TER	17	
s

;SECTION 3		

f3201	0	4096	10	1	
i 3235 12 6 700 440 1
i 3235 10 5.800 490.000 880 1
i 3235 8 5.600 490.000 1320 1
i 3235 6 5.400 490.000 1760 1
i 3235 4 5.200 490.000 2200 1
i 3235 2 5.000 490.000 2640 1
i 3236 12.200 6 500 293.500 1
i 3236 10.200 5.800 350.000 587.000 1
i 3236 8.200 5.600 350.000 880.500 1
i 3236 6.200 5.400 350.000 1174.000 1
i 3236 4.200 5.200 350.000 1467.500 1
i 3236 2.200 5.000 350.000 1761.000 1
i 3236 12.500 5 500 207.500 1
i 3236 11.200 4.900 350.000 415.000 1
i 3236 9.900 4.800 350.000 622.500 1
i 3236 8.600 4.700 350.000 830.000 1
i 3236 7.300 4.600 350.000 1037.500 1
i 3236 6.000 4.500 350.000 1245.000 1
i 3236 4.700 4.400 350.000 1452.500 1
i 3236 3.400 4.300 350.000 1660.000 1
i 3236 2.100 4.200 350.000 1867.500 1
i 3235 12.650 5 500 174.500 1
i 3235 11.350 4.900 350.000 349.000 1
i 3235 10.050 4.800 350.000 523.500 1
i 3235 8.750 4.700 350.000 698.000 1
i 3235 7.450 4.600 350.000 872.500 1
i 3235 6.150 4.500 350.000 1047.000 1
i 3235 4.850 4.400 350.000 1221.500 1
i 3235 3.550 4.300 350.000 1396.000 1
i 3235 2.250 4.200 350.000 1570.500 1
i 3235 13.100 5 700 130.500 1
i 3235 12.100 4.900 490.000 261.000 1
i 3235 11.100 4.800 490.000 391.500 1
i 3235 10.100 4.700 490.000 522.000 1
i 3235 9.100 4.600 490.000 652.500 1
i 3235 8.100 4.500 490.000 783.000 1
i 3235 7.100 4.400 490.000 913.500 1
i 3235 6.100 4.300 490.000 1044.000 1
i 3235 5.100 4.200 490.000 1174.500 1
i 3235 4.100 4.100 490.000 1305.000 1
i 3235 3.100 4.000 490.000 1435.500 1
i 3236 13 5 1000 92.500 1
i 3236 12 4.900 700.000 185.000 1
i 3236 11 4.800 700.000 277.500 1
i 3236 10 4.700 700.000 370.000 1
i 3236 9 4.600 700.000 462.500 1
i 3236 8 4.500 700.000 555.000 1
i 3236 7 4.400 700.000 647.500 1
i 3236 6 4.300 700.000 740.000 1
i 3236 5 4.200 700.000 832.500 1
i 3236 4 4.100 700.000 925.000 1
i 3236 3 4.000 700.000 1017.500 1
s 


</CsScore>
</CsoundSynthesizer>
<bsbPanel>
 <label>Widgets</label>
 <objectName/>
 <x>72</x>
 <y>179</y>
 <width>400</width>
 <height>200</height>
 <visible>true</visible>
 <uuid/>
 <bgcolor mode="nobackground">
  <r>231</r>
  <g>46</g>
  <b>255</b>
 </bgcolor>
 <bsbObject type="BSBVSlider" version="2">
  <objectName>slider1</objectName>
  <x>5</x>
  <y>5</y>
  <width>20</width>
  <height>100</height>
  <uuid>{54c876ec-5f36-4555-a184-c28782e52583}</uuid>
  <visible>true</visible>
  <midichan>0</midichan>
  <midicc>-3</midicc>
  <minimum>0.00000000</minimum>
  <maximum>1.00000000</maximum>
  <value>0.00000000</value>
  <mode>lin</mode>
  <mouseControl act="jump">continuous</mouseControl>
  <resolution>-1.00000000</resolution>
  <randomizable group="0">false</randomizable>
 </bsbObject>
</bsbPanel>
<bsbPresets>
</bsbPresets>
